---
title: "Mapping The Impact of Internal Migration Across Europe"
draft: false
author: "Francisco Rowe"
date: '2020-02-08'
categories: ["R"]
tags: ["R Markdown", "Migration", "Spatial Impact"]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE)
```

# Net Internal Migration Rate Across Europe

In November 2019, we published a paper assessing the impact of internal migration on redistributing population within European countries. Specifically we assess the impact of internal migration on promoting population concentration or deconcentration. Below is a thread posted on Twitter providing key aspects of the paper. The paper is open access: at the end of this post is the reference.

**Why this matters?** First, while considerable attention is devoted to international migration, the number of internal migration (763 million) is significantly greater -almost 3 times that of international migrants (272 million)


```{r, echo=FALSE}
# read data
rm(list=ls())
load("../post/eu_netmig_map.RData")
```



```{r, echo=FALSE, fig.width=10,fig.height=7}
library(leaflet)

# Specify the colour palette
pal <- colorFactor(palette = c("red", "salmon1", "white", "steelblue1", "blue"), 
           levels = c("less than -2", "-2 to 0", "0", "0 to 2", "more than 2"), ordered = FALSE)

# pal <- colorBin("RdYlBu", domain = spdf$z_score, bins = bins)

# There is a list of all the available background tiles in
# http://leaflet-extras.github.io/leaflet-providers/preview/index.html
# Create the initial background map, zooming in Europe
colourmap <- leaflet() %>% 
  addTiles() %>% 
  setView(lat = 48, lng = 20, zoom = 4) %>% 
  addProviderTiles(providers$NASAGIBS.ViirsEarthAtNight2012, group = "NASAGIBS.ViirsEarthAtNight2012") %>% 
  addProviderTiles(providers$Stamen.TonerLite, group = "Stamen.TonerLite")

# Create the interactive map showing the sequence clusters
interactive_map <- colourmap %>%
  addPolygons(data = combined_data_simpl,
              fillColor = ~pal(z_cat),
              weight = 0.4,
              opacity = 0.8,
              color = "black",
              dashArray = "3",
              fillOpacity = 0.7,
              popup = paste("Name: ", combined_data_simpl$name, "<br>",
                            "Net Migration: ", combined_data_simpl$net_migr, "<br>"),
              group = "Net migration in Europe",
              highlight = highlightOptions(
                weight = 5,
                color = "#666",
                dashArray = "",
                fillOpacity = 0.7,
                bringToFront = TRUE)) %>% 
  addLegend(pal = pal,
            values  = combined_data_simpl$z_cat,
            na.label = "Missing data",
            position = "bottomleft",
            title = "Net migration in Europe (z-scores)") %>% 
  addLayersControl(baseGroups = c("NASAGIBS.ViirsEarthAtNight2012", "Stamen.TonerLite"),
    overlayGroups = "Net migration in Europe",
    options = layersControlOptions(collapsed = FALSE))


interactive_map
```

Reference

Rowe, F., Bell, M., Bernard, A., Charles-Edwards, E. and Ueffing, P., 2019. Impact of Internal Migration on Population Redistribution in Europe: Urbanisation, Counterurbanisation or Spatial Equilibrium?. *Comparative Population Studies*, 44.
